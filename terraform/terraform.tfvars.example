# YugabyteDB Infrastructure - PRODUCTION-READY Configuration
# Project: codet-dev-d5157 - Optimized for MINIMAL COST
# Region: us-central1

project_id = "codet-dev-d5157"
region     = "us-central1"

vpc_name    = "yugabyte-tf-vpc"
subnet_name = "yugabyte-subnet"
subnet_cidr = "10.0.1.0/24"

pods_cidr     = "10.1.0.0/16"
services_cidr = "10.2.0.0/16"
master_cidr   = "172.16.0.0/28"

cluster_name = "codet-yugabyte-cluster"

# Node Pool Configuration - MINIMAL COST
general_min_nodes = 1
general_max_nodes = 2
general_machine_type = "e2-micro"    # Minimal cost

# TServer Node Pool - MINIMAL COST  
tserver_min_nodes = 1
tserver_max_nodes = 2
tserver_machine_type = "e2-small"    # Minimal cost with some memory

# Resource Limits - MINIMAL
min_cpu    = 1     # Minimal CPU
max_cpu    = 4     # Low maximum
min_memory = 2     # Minimal memory  
max_memory = 8     # Low maximum

environment = "prod"  # Production environment

labels = {
  managed-by = "terraform"
  project    = "yugabytedb-deployment"
  team       = "codet-dev"
  cost       = "optimized"  # Changed from minimal
  owner      = "codet"
  tier       = "production"
}

# PRODUCTION SETTINGS - Enable for reliability
backup_enabled        = false            # Disabled for cost savings
backup_retention_days = 30               # Extended retention

monitoring_enabled    = false            # Disabled for cost savings
logging_enabled       = false            # Disabled for cost savings

enable_binary_authorization = true       # Enable for security
enable_network_policy      = true        # Enable for security  
enable_private_nodes       = true        # Keep for security
enable_workload_identity   = true        # Enable for security

# MAINTENANCE CONFIGURATION - Dynamic scheduling
maintenance_start_hour    = 3
maintenance_duration_hours = 4
maintenance_recurrence     = "FREQ=WEEKLY;BYDAY=SA"  # Every Saturday 