# YugabyteDB Infrastructure - PRODUCTION-READY Configuration
# Project: codet-dev-d5157 - Optimized for production reliability with cost consciousness

project_id = "codet-dev-d5157"
region     = "us-central1"

vpc_name    = "yugabyte-tf-vpc"
subnet_name = "yugabyte-subnet-us-central1"
subnet_cidr = "10.0.1.0/24"

pods_cidr     = "10.1.0.0/16"
services_cidr = "10.2.0.0/16"
master_cidr   = "172.16.0.0/28"

cluster_name = "codet-yugabyte-cluster"

# PRODUCTION-READY RESOURCE SETTINGS
min_cpu    = 4    # Increased for production workloads
max_cpu    = 40   # Increased to support 3x3 production setup
min_memory = 16   # Increased for production workloads  
max_memory = 80   # Increased to support production setup

# Use production-appropriate machine types
general_machine_type = "e2-standard-2"    # Upgraded for stability
general_min_nodes   = 1
general_max_nodes   = 6                   # Increased for production scaling

tserver_machine_type = "e2-standard-4"    # Upgraded for production performance
tserver_min_nodes   = 0
tserver_max_nodes   = 6                   # Increased for production scaling

environment = "prod"  # Production environment

labels = {
  managed-by = "terraform"
  project    = "yugabytedb-deployment"
  team       = "codet-dev"
  cost       = "optimized"  # Changed from minimal
  owner      = "codet"
  tier       = "production"
}

# PRODUCTION SETTINGS - Enable for reliability
backup_enabled        = true             # Enable backups for production
backup_retention_days = 30               # Extended retention

monitoring_enabled = true                # Enable monitoring for production
logging_enabled    = true                # Enable logging for production

enable_binary_authorization = true       # Enable for security
enable_network_policy      = true        # Enable for security  
enable_private_nodes       = true        # Keep for security
enable_workload_identity   = true        # Enable for security

# MAINTENANCE CONFIGURATION - Dynamic scheduling
maintenance_start_hour      = 2           # 2 AM maintenance window
maintenance_duration_hours  = 4           # 4-hour maintenance window
maintenance_recurrence     = "FREQ=WEEKLY;BYDAY=SA"  # Every Saturday 